services:
  helloworld:
    environment:
      - BLAH=${VARIABLE:-default}
    build: .

  helloworldimage:
    image: myhelloworld
    build: .

  alpinewithenv:
    build:
      context: ../..
      dockerfile: tests/composefiles/Dockerfile.alpinewithenv
    environment:
      - LLAMAS=${MISSING_VARIABLE:-always}
    command: /scripts/test_env.sh

  alpinewithfailinglink:
    image: alpine:3.15
    command: echo hello from alpine
    links:
      - fail

  fail:
    image: alpine:3.15
    command: sh -c "echo failing on purpose, expect exit 1; exit 1"
